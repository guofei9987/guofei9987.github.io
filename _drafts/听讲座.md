## 互联网金融疯狂

信用评分

- 如何找到合适的feature（如何定义好坏客户，如何准备数据，如何构建特征，如何评估特征）
- 如何找到合适的模型
- 如何评估

### 特征
#### 如何定义好坏客户

- Good 好用户
- bad 坏用户
- indeterminate 不确定用户
- exclusive 剔除用户（模型不需要预测的用户，例如命中欺诈策略的用户）

分析过程
- 窗口期（太短导致有效比例太少，太长）
- 逾期天数。分7段（M0~M7），如果有多笔逾期，取最长逾期天数。
- **滚动率指标**。一个转移概率矩阵，现在某个阶段的用户，转移到某个阶段的概率。


#### 建模数据准备
稳定性、可靠性、相关性

- 稳定性。一个坑，刚建好模，数据失效了。大公司往往某个数据源，有很多节点加工。
- 可靠性。尽可能使用上层数据。一个坑，某个项目用来做报表的数据，就不要拿来建模了。
- 相关性。精力有限，结合主观经验来选择。
- 额外。注意趋势。


#### 特征选取的一个例子
RFM法、行为维度（浏览、加购、消费）、时间维度（3、6、9个月窗口）

例如，2个客户，零食消费占比都是50%。但1号两个订单，2号200个订单，那么这个50%可信度是不一样的（点估计）  
Wilson置信区间：数据量较小时的修正的区间估计  
用置信区间的下限，作为用户偏好特征。  


#### 相关性
- IV（最常用）
- AUC
- KS

建议用IV，因为IV评估的是特征的区分能力，KS评估的是特征的排序能力

（公式）  

极端情况：分母为0，怎么做呢？
- 直接定义为规则，放到模型前一步
- 重新离散化和分组
- 0补为1


关于IV，参考这个：
https://blog.csdn.net/iModel/article/details/79420437

#### 稳定性
例如，用近期是否Iphone作为特征。这个特征随着时间有趋势性，导致某段时间大家的风险评分高，某段时间大家的风险评分低。

稳定性指标
- PSI（复杂）
- 均值，方差

#### 变量间相关性
相关性矩阵

### 模型
多态数据

GBDT+LR

deep learning


#### 多态数据：高维稀疏，低维稠密共存。

例如，ID、收货地址高维稀疏；pv低维稠密。

降维：人工筛选，embedding，auto encoder，PCA等

风控看长期性（所以维度多）

#### 结构化和非结构化
nlp，graph等

#### 线上和线下
线下模型要复杂，线上模型要稳定。

#### LR+GBDT
简洁、可读性强、便于维护。

不能学习非线性特征。解决：
- 非线性变换：box-？？？没听清
- 离散化。等距切割，或者决策树切割

不能学习交叉特征。
- 特征相乘（笛卡尔积），但算法太复杂


解决：GBDT

#### wide&deep模型

google提出的

### 评估

K-fold cross validation

实例：幸存者偏差。画图发现，随着逾期的增加，风险先增加再减少。这是因为，对于高逾期用户，平台已经“拉黑了”，所以风险降低。这样用DeepLearning就会不合适。

#### 常用监控指标

AUC，KS

模型稳定性
- PSI矩阵。PSI<0.1比较优秀。原理与IV很像。


Vovariate Shift。  
上线之后，KS指标变差。原因是，低信用用户直接被模型拒绝了，没有机会参与到线上模型评估中。
