---
layout: post
title: 【pandas】语法速查
categories:
tags: 0x12_特征工程
keywords:
description:
order: 101
---

```python
import pandas as pd
```



**pd.set_option**

```py
pd.set_option('display.max_columns',5000)
pd.set_option('display.max_columns', None) # 显示所有的列
pd.set_option('display.width',100000)
pd.set_option('display.max_rows', None) # 显示所有行
pd.set_option('display.max_colwidth',100) # 有时候一个单元格里面的内容太长，超过上限会不显示并加上省略号
```



## 创建


- 按列创建
```python
df = pd.DataFrame({'col1': [1] * 9, 'col2': ['one', 'tow', 'three'] * 3}, index=range(9))
```
- 从数据集创建
```py
df = pd.DataFrame([[1, 2], [3, 4], [5, 6]], index=range(3), columns=['col1', 'col2'])
```
- 按行创建
```python
df = pd.DataFrame(
    data=[{'col1': 1, 'col2': 1}, {'col1': 2, 'col2': 2}, {'col1': 3, 'col2': 3}, {'col2': 4}]
    , index=['idx1', 'idx2', 'idx3', 'idx4'], columns=['col1', 'col2']
)
# 当字段名对不上时，会按照指定来，并最终保证最终的 df 与 columns 一致
```

## 与各种数据类型的交互

**Python 基本数据类型**
```python
df.to_dict(orient='list')
# {'col1': [数据], 'col2': [数据]}


df.to_dict(orient='records')
# [{'col1': 1, 'col2': 'one'},
# {'col1': 1, 'col2': 'tow'}]

# 其它："dict", "list", "series", "split", "tight", "records", "index"
```

**Excel**
```python
df.to_excel('xlsx.xlsx', sheet_name='sheet1', index=False)
# index=False 不保存行索引
df1 = pd.read_excel('xlsx.xlsx')

# 写入多个 sheet：
with pd.ExcelWriter('xlsx.xlsx') as writer:
    df.to_excel(writer, sheet_name='sheet1', index=False)
    df.to_excel(writer, sheet_name='sheet2', index=False)
```

**CSV**
```python
df.to_csv("csv.csv", index=False)
df1 = pd.read_csv("csv.csv")
# 可以自定义 sep、names 等，还可以设置读取开始/结束位置，不多记了
```

**Json**
```python
df.to_json('json.json', orient='records', force_ascii=False)
# [{'col1': 1, 'col2': 'one'},
# {'col1': 1, 'col2': 'tow'}]
df1 = pd.read_json('json.json', orient='records')

# 注：
# force_ascii=False 类似 json 中的 ensure_ascii
# orient 还可以是: "split", "records", "index", "table", "columns", "values"
```



**其它**
```py
# 剪贴板
read_clipboard
to_clipboard

to_panel
to_period # 把时间序列数据，变成频率数据
to_latex
to_html
to_string
to_pickle # 存到内存中
to_sql # 也挺有用，在另一篇博客里详解
```


## 按行筛选

（方法太多记不住，记一个最通用的方法即可）

