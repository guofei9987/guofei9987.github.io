---
layout: post
title: 【C】一些特性
categories: 语言
tags:
keywords:
description:
order: 10010
---



## 关于变量类型

```c
for (int i = 0; i < 10; i++) {
    static int a = 10;
    a++;
    printf("%d\n", a);
}
// >11, 12, 13, 14, 15, 16, 17, 18, 19, 20,

for (int i = 0; i < 10; i++) {
    int a = 10;
    a++;
    printf("%d\n", a);
}
// >11, 11, 11, 11, 11, 11, 11, 11, 11, 11,
```

这是因为， static 只会初始化1次，无论它在哪


## 关于指针

### 二级指针避免内存泄露
错误的代码
```c
void tst(char *i) {
    i = malloc(100); // 这个 i 运行完毕后被清空了
}

int main() {
    char *p = NULL;
    tst(p);
    strcpy(p, "hello"); // 这个 p 仍然为0
    free(p); // 释放不是 malloc 分配的内存
    return 0;
}
```

正确的代码：用二级指针
```c
void tst(char **i) {
    *i = malloc(100);
}

int main() {
    char *p = NULL;
    tst(&p);
    strcpy(p, "hello");
    free(p);
    return 0;
}
```


## 零碎知识

```c
char a = '\72'; // 表示 8 进制的ascii码
char s[5] = {"abc"};  // 也是合法的
int *a, b; // a 是个指针，b是int类型

```


```c
int (*p)[5]; // 指针指向一个长度为5的整形数组
int *p[5]; // 定义一个长度为5的数组，数组的元素都是指针
```
