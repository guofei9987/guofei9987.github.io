---
layout: post
title: 【C6】多文件
categories: 语言
tags:
keywords:
description:
order: 10005
---



## 编译

gcc
```bash
gcc main.c -o main.so
# 然后执行 main 文件
./main.so

# (或者)编译+链接
gcc -o main.o main.c -c
gcc -o main main.o
```

include
```c
#include <stdio.h> // 表示文件在系统目录下
#include "a.h" // 表示文件在当前目录下
```

知识
- main函数是执行的起点，有且只能有1个
- printf 是向标准设备输出，未必是向屏幕输出，例如 `./main > save.txt`
- 建议用 `int main`，而不是 `void main`，后者不支持c++
- 约定 `return 0;` 代表执行成功，`return -1;` 代表执行失败
- 预编译：把 include 替换进来，删除注释，等操作。`gcc -o  main1.c main.c -E`
- 汇编 `gcc -o main.s main.c -S`




## 多文件

头文件 `my_lib.h`
```c
//防止头文件被重复包含
#pragma once

//兼容C++编译器，如果遇到C++编译器，按C编译
#ifdef __cplusplus
extern "C"
{
#endif

//    这里声明你的函数
int my_func1();

#ifdef __cplusplus
}
#endif
```

实现文件 `my_lib.c`
```c
int my_func1(){
    return 0;
}
```

引用 `my_test.c`
```c
#include <stdio.h>
#include "my_lib.h"

int main(void) {
    printf("%d", my_func1());
}
```

如何编译
```bash
gcc -o my_test my_test.c my_lib.c
```
