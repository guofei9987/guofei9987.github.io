---
layout: post
title: 【PSO】粒子群算法
categories:
tags: 6智能算法
keywords:
description:
order: 602
---

这里是理论篇，Matlab代码见于我的推文[【随笔】 《谁动了我的奶酪》中的粒子群算法.](http://127.0.0.1:4000/2016/07/25/WhoMovedMyCheese.html)  
我做了个库，见于这里<a href='https://github.com/guofei9987/scikit-opt'><i class="fa fa-github fa-lg" style="color:#428BCA;">Python实现GA</i></a>  

<div id="main" style="width: 30em;height:30em;"></div>

<script language='javascript'>
var myChart = echarts.init(document.getElementById('main'));

option = {
    title: {
        text: 'PSO粒子群算法的步骤'
    },
    tooltip: {},
    animationDurationUpdate: 500,
    animationEasingUpdate: 'quinticInOut',
    series : [
        {
            type: 'graph',
            layout: 'none',
            symbolSize: [260,50],

            label: {
                normal: {
                    show: true
                }
            },
            edgeSymbolSize: [10, 1],
            edgeLabel: {
                normal: {
                    textStyle: {
                        fontSize: 20
                    }
                }
            },
            data: [{
                name: '初始化位置x,速度v',
                x: 100,
                y: 200,

            }, {
                name: '计算个体极值pbest， 全局极值gbest',
                symbol:'rect',
                x: 100,
                y: 300
            }, {
                name: '更新位置x，速度v',
                symbol:'rect',
                x: 100,
                y: 400
            },{
                name: '更新权重w',
                symbol:'rect',
                x: 100,
                y: 500
            },{
                name: '再次计算个体极值pbest， 全局极值gbest',
                symbol:'rect',
                x: 100,
                y: 600,

            },{
                name: '满足收敛规则',
                symbol:'diamond',
                x: 100,
                y: 700
            }
            ,{
                name: 'hidden1',
                x: 300,
                y: 700,
                symbolSize:0
            },
            {
                name: 'hidden2',
                x: 300,
                y: 300,
                symbolSize:0
            }],
            // links: [],
            links: [{
                source: 1,
                target: 0,
            }, {
                source: 1,
                target: 2,
            }, {
                source: 2,
                target: 3
            }, {
                source: 3,
                target: 4
            }, {
                source: 4,
                target: 5
            }, {
                source: 5,
                target: 'hidden1',
                }, {
                source: 'hidden1',
                target: 'hidden2',
                label:{
                    normal:{formatter:'False',show:true}}
            }, {
                source: 'hidden2',
                target: 1,
                } ],

            lineStyle: {
                normal: {
                    width: 5,
                    curveness: 0
                }
            }
        }
    ]
};

myChart.setOption(option)
</script>


## 变量定义

问题的维度：n  
第i个粒子的位置$x(i,:)=(xi1,xi2,...,xin)$  
第i个粒子的速度$v(i,:)=(vi1,vi2,...vin)$  
第i个粒子的历史最优$pbest(i,:)=(pi1,pi2,...pin)$  
全局最优$gbest=(g1,g2,...gn)$  

### 其它变量
r 粒子群算法的种子数量  
m 粒子群算法的群体大小  
max_d  最大迭代次数  
r1,r2 加速权重 取[0,1]之间的随机数（每次迭代都重新生成）  
c1,c2 加速常数 取2左右的随机数  
w 惯性权重  
$vmax=k*xmax   (0.1<=k<=1)  $

### 迭代算法
更新速度：$$v(i,:)=w * v(i,:)+c1 * r1 * (pbest(i,:)-x(i,:))+c2 * r2 * (gbest-x(i,:))$$  
更新位置：$$x(i,:)=x(i,:)+v(i,:)$$  


where,  
第一部分称为“惯性”或“动量” inertia,momentum  
第二部分称为“认知”    cognition ，反映粒子的memory或rememberance  
第三部分成为social，反映粒子群体历史经验  

## PSO的改进
有两种：
- 自适应变异
- 惯性权重

### 自适应变异
为了解决粒子群算法容易早熟收敛，后期迭代效率不高的问题。  
每次迭代后，按照一定概率重新初始化某些粒子。  
### PSO改进：随机权重法

$u=u_{min}+(u_{max}-u_{min}) * rand(0,1)$  
$w=N(u,\sigma^2)$

### PSO改进：线性递减权重

这个方法使得惯性权重越来越高，粒子的跳动能力越来越低，算法迭代到后面，稳定性越来越高  
$w=w_{max}-\dfrac{t * (w_{max}-w_{min})}{t_{max}}$  
其中，t是此次的迭代次数  
