---
layout: post
title: 【LeetCode】trie 前缀树
categories:
tags: 0x81_刷题
keywords:
description:
order: 595
visible: n
---


## 677. Map Sum Pairs


```python
import collections


class TrieNode:
    def __init__(self):
        self.children = collections.defaultdict(TrieNode)
        self.val = 0

class MapSum:

    def __init__(self):
        self.root = TrieNode()


    def insert(self, key: str, val: int) -> None:
        curr = self.root
        for char in key:
            curr=curr.children[char]

        curr.val=val


    def sum(self, prefix: str) -> int:
        curr=self.root
        for char in prefix:
            curr=curr.children[char]
            if curr is None:
                return 0

        res=0
        queue=[curr]
        while queue:
            new_queue=[]
            for item in queue:
                new_queue.extend(item.children.values())
                res+=item.val
            queue=new_queue
        return res
```


## 648. Replace Words

在模版上改一改
```py
import collections


class TrieNode:
    def __init__(self):
        # 如果字符是有限的，这里可以用 list 来存储。不用做hash更快
        self.children = collections.defaultdict(TrieNode)
        self.is_word = False
        self.whole_word=None


class Trie:

    def __init__(self):
        self.root = TrieNode()

    def insert(self, word: str) -> None:
        curr = self.root
        for char in word:
            curr = curr.children[char]
            # 要求只记录最短的，长的就不往里面塞了
            if curr.is_word:
                return
        curr.is_word = True
        curr.whole_word=word

    def search(self, word: str) -> bool:
        curr = self.root
        for char in word:
            curr = curr.children.get(char)
            if curr is None:
                return False
        return curr.is_word

    def startsWith(self, prefix: str) -> bool:
        curr = self.root
        for char in prefix:
            curr = curr.children.get(char)
            if curr is None:
                return False
        return True

    def in_start(self, sentence):
        curr = self.root
        for char in sentence:
            if char not in curr.children:
                return False
            curr = curr.children.get(char)
            if curr.is_word:
                return True
        return False

    def extract_prefix(self,sentence):
        curr = self.root
        for char in sentence:
            if char not in curr.children:
                return sentence
            curr = curr.children.get(char)
            if curr.is_word:
                return curr.whole_word
        return sentence





class Solution:
    def replaceWords(self, dictionary: List[str], sentence: str) -> str:
        trie=Trie()
        for word in dictionary:
            trie.insert(word)

        res=[]
        for s in sentence.split(' '):
            res.append(trie.extract_prefix(s))

        return ' '.join(res)
```        
